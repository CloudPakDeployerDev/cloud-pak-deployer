---
- name: Check that all required variables are set for the generators
  assert:
    quiet: true
    that:
      - "{{item}} is defined"
    fail_msg: "'{{item}}' needs to be set for this role to work"
  with_items:
  - path_to_config_dir
  - path_to_generators_dir

- name: Create generated_config work folder if it does not exist
  file:
    path: '{{status_dir}}/generated_config'
    state: directory

- name: Create generated_defaults work folder if it does not exist
  file:
    path: '{{status_dir}}/generated_defaults'
    state: directory

- include_tasks: ibmcloud-generate.yaml
  when: cloud_platform == 'ibm-cloud'

- include_tasks: existing-ocp-generate.yaml
  when: cloud_platform == 'existing-ocp'
