---
- name: Validate mandatory variables are defined
  assert:
    that:
      - cloud_platform is defined
      - roks_config is defined
      - cp4d_config is defined

- name: Validate cloud_platform is implemented
  fail: msg="cloud_platform {{ cloud_platform }} is not implemented, current implemented cloud platforms are {{ implemented_cloud_platform_types }} "
  when: "cloud_platform not in implemented_cloud_platform_types"

- name: Build configuration for IBM Cloud
  block:
    - name: Apply defaults to configuration
      include_role: 
        name: ibmcloud-build-configuration
    
  when: "cloud_platform == 'ibm-cloud'"