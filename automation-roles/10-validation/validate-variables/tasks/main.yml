---
- name: Validate mandatory variables are defined
  assert:
    that:
      - vault_type is defined
      - vault_authentication_type is defined
      - cloud_platform is defined

- name: Validate cloud_platform is supported
  fail: msg="cloud_platform {{ cloud_platform }} only support values {{ supported_cloud_platform_types }} "
  when: "cloud_platform not in supported_cloud_platform_types"

- name: Validate mandatory variables and secrets for ibm-cloud
  include_tasks: ibmcloud-validate-variables.yml
  when:
  - cloud_platform == 'ibm-cloud'

- name: Validate mandatory variables and secrets for vsphere
  include_tasks: vsphere-validate-variables.yml
  when:
  - cloud_platform == 'vsphere'