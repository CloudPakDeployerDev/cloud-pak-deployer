---
- debug:
    msg: "Handling OpenShift cluster {{ current_openshift_cluster.name }}"

- name: Login to the OpenShift cluster {{ current_openshift_cluster.name }}
  include_role:
    name: openshift-login
  vars:
    openshift_cluster_name: "{{ current_openshift_cluster.name }}"

- name: Prepare storage for OpenShift cluster {{ current_openshift_cluster.name }}
  include_role:
    name: storage-classes
  loop: "{{ current_openshift_cluster.openshift_storage | default([]) }}"
  loop_control:
    loop_var: current_storage_class
