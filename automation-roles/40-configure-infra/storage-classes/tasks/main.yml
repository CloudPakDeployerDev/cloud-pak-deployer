---

- name: Validate mandatory variables are defined
  assert:
    that:
      - cloud_platform is defined

- name: Validate cloud_platform is implemented
  fail: msg="cloud_platform {{ cloud_platform }} is not implemented, current implemented cloud platforms are {{ implemented_cloud_platform_types }} "
  when: "cloud_platform not in implemented_cloud_platform_types"

- name: Processing storage class
  debug:
    var: current_storage_class

- name: Configure NFS storage class
  include_role: 
    name: nfs-storage-class
  when: "cloud_platform == 'ibm-cloud' and current_storage_class.storage_type == 'nfs'"

- name: Configure OCS storage class
  include_role: 
    name: ocs-storage-class
  when: "cloud_platform == 'ibm-cloud' and current_storage_class.storage_type == 'ocs'"
  

