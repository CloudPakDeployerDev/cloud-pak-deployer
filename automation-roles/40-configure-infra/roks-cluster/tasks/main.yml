---
# tasks file for roks-cluster
- debug:
    msg: "Handling ROKS cluster {{ current_roks_cluster.name }}"

- name: Login to the OpenShift cluster {{ current_roks_cluster.name }}
  include_role:
    name: openshift-login
  vars:
    roks_name: "{{ current_roks_cluster.name }}"

- name: Prepare storage classes for OpenShift cluster {{ current_roks_cluster.name }}
  include_role:
    name: storage-classes
  loop: "{{ current_roks_cluster.storage_classes | default([]) }}"
  loop_control:
    loop_var: current_storage_class

- name: Prepare OpenShift cluster {{ current_roks_cluster.name }}
  include_role:
    name: openshift-prepare-cluster
  vars:
    roks_name: "{{ current_roks_cluster.name }}"
