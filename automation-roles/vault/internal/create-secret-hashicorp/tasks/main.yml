---
- name: Create secret Validate mandatory variables are defined
  assert:
    that:
      - secret_name_path is defined
      - secret_payload is defined

- name: Create the new secret inside vault
  shell: "vault kv put {{ secret_name_path }} value=\"{{ secret_payload }}\""
  register: hashicorp_vault_create_result

- debug:
    msg: "Secret {{ secret_name_path }} successfully created on Hashicorp vault"