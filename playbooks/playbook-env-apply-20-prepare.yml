---
- name: 20 - Prepare
  hosts: localhost
  connection: local
  become: True
  gather_facts: False

  tasks:
  - name: Connect to Vault
    include_role:
      name: vault-connect

  - name: "Include 'generators'-role and pass variables to it"
    include_role:
      name: generators
    vars:
      path_to_config_dir: "{{ config_dir }}"
      path_to_generators_dir: "{{ generators_dir | default([(playbook_dir | dirname),'/automation-generators'] | join) }}"
      path_to_terraform_work_dir: "{{status_dir}}/terraform"
