---
- name: Secrets
  hosts: localhost
  connection: local
  become: True
  gather_facts: False

  vars:
    ansible_callback_diy_playbook_on_task_start_msg: ""
    ansible_callback_diy_runner_on_skipped_msg: ""
    ansible_callback_diy_runner_on_ok_msg: ""

  tasks:
  - include_role:
      name: vault-connect

  - include_role:
      name: vault-list-secrets
    when: ACTION == "list"

  - include_role:
      name: vault-create-secret
    when: ACTION == "set"

  - include_role:
      name: vault-delete-secret
    when: ACTION == "delete"

  - include_role:
      name: vault-get-secret
    when: ACTION == "get"

