---
- name: Run Infrastructure automation
  hosts: localhost
  connection: local
  become: True
  gather_facts: False

  roles:
    - role: vault-connect

  tasks:
  - name: Validate if the key testkey exist in the vault
    include_role: 
      name: vault-has-secret
    vars:
      secret_name: "testkey"
      secret_group: "testgroup"    
      secret_field: "value"
