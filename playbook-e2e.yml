---
- name: Preparation
  hosts: localhost
  connection: local
  become: True

  tasks:
  - name: Validate mandatory variables are defined
    assert:
      that:
        - vault_api_key is defined

  roles:
    - role: vault-connect
      vars:
        vault_type: "hashicorp-vault"
        vault_authentication_type: "api-key"
        vault_url: "http://localhost:8200"

    - role: vault-connect
      vars:
        vault_type: "ibmcloud-vault"
        vault_authentication_type: "api-key"
        vault_url: "https://1df13601-ad55-42a2-8b95-6ea38da9c817.eu-de.secrets-manager.appdomain.cloud"
