---
- name: Preparation
  hosts: localhost
  environment:
    VAULT_ADDR: "{{ vault_url }}"
    VAULT_TOKEN: "{{ vault_api_key }}"
  connection: local
  become: True

  roles:
    - role: validate-variables
    #- role: terraform-classic
    - role: cli-installs
    # - role: vault-connect
    # - role: vault-create-secret
    #   vars:
    #     secret_name: "secret_item6"
    #     secret_payload: "A very secret value6!!"
    #     secret_description: "The description of the secret_item6"
    #     secret_group: "my_secret_group"
    # - role: vault-has-secret
    #   vars:
    #     secret_name: "secret_item6"
    #     secret_group: "my_secret_group"
    # - role: vault-get-secret
    #   vars:
    #     secret_name: "secret_item6"
    #     secret_group: "my_secret_group"
