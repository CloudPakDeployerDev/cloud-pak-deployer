---
title: Tools
tabs: ['Development Setup', 'Guidelines']
---

# Introduction

Gatsby themes encapsulate all of the configuration and implementation details of Gatsby websites. This GitHub repository has been built with a dependancy on the gatsby-theme-carbon package. The primary goal of gatsby-theme-carbon is to get content authors speaking the IBM Design Language with Carbon as soon as possible. This GiHub repository is connected to Travis any commit will cause a build of the GitHub pages to be triggered. A better way of working is to use the tooling from a loacal system

## Local tooling installation
If you want to test the documentation pages you're developing, it is best to run Gatsby in a container and map your local doc folder to a folder inside the container. This avoids having to install nvm and many modules on your workstation.

Do the following:
* Make sure you have cloned this repository to your workstation
* Install Docker on your workstation
* Start from the main directory of the cloud-pak-deployer repository
```
cd doc
docker build -t cpd-doc .
```

This will build a CentOS image with `nvm` and the required Node.js modules already installed. It will take ~5-10 minutes to complete this step, dependent on your network bandwidth.

## Running the docker image
```
docker run --name cpd-doc -d -p 8000:8000 -v $PWD:/doc cpd-doc:latest
```

This will start the docker container as a daemon. You can monitor its progress by tailing the logs.

```
docker logs -f cpd-doc 
```

It will take approximately 10 minutes to install all Node.js packages into the `node_modules` directory, this is only the first time. The `node_modules` directory is ignored by Git so it will no be synchronized with the upstream repository. Next time you start the container, it should take less than 1 minute.

Once finished, you will see the following message:
```output
âœ– 6 problems (0 errors, 6 warnings)

success Building development bundle - 369.543s
```

Whenever you save changes to a document, the logs will show something:
```output
info changed file at /doc/src/pages/tools/development-setup.mdx
success building schema - 0.634s
info Total nodes: 147, SitePage nodes: 17 (use --verbose for breakdown)
success createPages - 0.004s
success Checking for changed pages - 0.001s
success update schema - 0.047s
success onPreExtractQueries - 0.001s
success extract queries from components - 0.624s
...
success Re-building development bundle - 2.436s
```

## Starting the browswer
Once you the container has fully started, it automatically tracks all changes in under the `doc` folder and updates the pages site automatically. You can view the site by opening a browswer for URL:

http://localhost:8000

## Stopping the docker container
If you don't want to test your changes locally anymore, stop the docker container.
```
docker kill cpd-doc
```

Next time you want to test your changes, you only have to run:
```
docker start cpd-doc
```

## Removing the docker container and image
If you want to remove all from your workstation, do the following:
```
docker rm -f cpd-doc
docker rmi -f cpd-doc:latest
```












# Tooling Installation

What follow are instructions for the Mac. 

THe git command line interface needs to be installed - this can be achieved with the following command

    git --version (follow the commands to insdtall git if its not already installed)

In order to enable development on lcoal machines nvm needs to be installed  - this can be achieved with the following command

    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash

The install is supposed to update your profile but if that is not the case the the following should be added to what ever profile you are using .kshrc, .bashrc etc

```
export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")" 
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm
```

Restart your shell for the new configuration to take effect

Install node with the following command

    nvm install 12.21.0

Install some additional modules needed by the build process

    npm i apollo-boost graphql react-apollo -S

Make sure this release is being used

    nvm use 12.21.0

# Pulling an initial copy of the GitHub repository

An initial pull of the repository can be done with the following command

    git clone https://github.ibm.com/CloudPakDeployer/cloud-paks-deployer.git

# Running the GitHub pages Locally

Change into the `doc` directory of the downloaded code and run the following to start a local environment for editing

Install npm and gatsby:

    npm install
    npm install -g gatsby-cli

Run the development environment

    npm run dev

The web content can be accesses via a browser at http://localhost:8000

Any changes made within the local repository will automatically be reflected in the local site. 

# Committing changes back to the repository

from the top level directory of the local git repository run the following

    git add .

    git commit -m [replace this with a quoted senible message for the commit]
  
    git push


Note that after this push the your updated code will be sent to git and a Travis job to build the pages site will be triggered. The Travis job can be foloowed at https://travis.ibm.com, you can login to follow the build using your github credentials. 



